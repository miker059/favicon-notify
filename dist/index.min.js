!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(t="undefined"!=typeof globalThis?globalThis:t||self).FaviconNotify=o()}(this,(function(){"use strict";var t=function(){return t=Object.assign||function(t){for(var o,i=1,e=arguments.length;i<e;i++)for(var n in o=arguments[i])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t},t.apply(this,arguments)};return function(){function o(o,i){void 0===o&&(o={});this.forceNotCount=!1,this.readyCallback=null,this.icoLoaded=!1,this.counter=0,this.options=t(t({},{faviconUrl:"/favicon.ico",labelColor:"#ff0000",labelSize:70,labelOffset:5,textColor:"#fff",fontSize:80,fontFamily:"Arial",fontStyle:"normal",fontWeight:"bold",fontVOffset:4,withCounter:!1,animation:"none",animationDuration:500}),o),this.appleFavicon=null,i?(this.favicon=i,this.options.faviconUrl=this.favicon.href):(this.favicon=document.createElement("link"),this.favicon.rel="icon",this.favicon.type="image/x-icon"),this.ico=document.createElement("img"),this.ico.src=this.options.faviconUrl,this.init()}return o.prototype.init=function(){var t=this;this.ico.addEventListener("load",(function(){t.icoLoaded=!0,t.favicon.href=t.ico.src,t.appleFavicon=document.querySelector("[rel=apple-touch-icon]"),t.appleFavicon||(t.appleFavicon=document.createElement("link"),t.appleFavicon.rel="apple-touch-icon",t.appleFavicon.setAttribute("sizes","".concat(t.ico.width,"x").concat(t.ico.height)),t.appleFavicon.href=t.ico.src);var o=document.getElementsByTagName("head")[0];o.appendChild(t.favicon),o.appendChild(t.appleFavicon),null!==t.readyCallback&&t.readyCallback()}))},o.prototype.ready=function(t){this.readyCallback=t},o.prototype.drawIcon=function(){if(!this.icoLoaded)throw new Error("Favicon not loaded");if(!this.counter&&this.forceNotCount)return this.ico.src;var t=document.createElement("canvas");t.width=this.ico.width,t.height=this.ico.height;var o=t.getContext("2d"),i=t.width,e=t.height,n=i*this.options.labelSize/100,a=i*this.options.labelOffset/100,c=i-n/2+a,r=e-n/2+a,l=n/2-a,s=2*l*this.options.fontSize/100;if(!o)throw new Error("<canvas> not supported!");if(o.clearRect(0,0,i,e),o.beginPath(),o.fillStyle=this.options.labelColor,o.arc(c,r,l,0,2*Math.PI),o.fill(),o.closePath(),this.options.withCounter){!this.forceNotCount&&this.counter++;var h=this.counter<100?this.counter.toString():"99+";o.textAlign="center",o.textBaseline="middle",o.font="".concat(this.options.fontWeight," ").concat(this.options.fontStyle," ").concat(s,"px ").concat(this.options.fontFamily),o.fillStyle=this.options.textColor,o.fillText(h,c,r+this.options.fontVOffset,s)}var f=new Path2D;return f.moveTo(0,0),f.lineTo(i,0),f.lineTo(i,r),f.arc(c,r,n/2,0,Math.PI/2,!0),f.lineTo(0,e),o.clip(f),o.drawImage(this.ico,0,0),t.toDataURL()},o.prototype.addFavicon=function(t){this.favicon&&(this.favicon.href=t),this.appleFavicon&&(this.appleFavicon.href=t)},o.prototype.add=function(t){return void 0===t&&(t=!1),this.forceNotCount=t,this.addFavicon(this.drawIcon()),this},o.prototype.remove=function(t){return void 0===t&&(t=!1),this.forceNotCount=t,!t&&(this.counter=0),this.addFavicon(this.ico.src),this},o}()}));
//# sourceMappingURL=index.min.js.map
